<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile - Audimus</title>
    <!-- Tailwind CSS for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'ui-bg': '#B0C4DE',    // The grey-blue background from the image
                        'box-bg': '#D6E4F0',   // Light blue for list background
                        'btn-bg': '#DFE8F0',   // Button background
                    }
                }
            }
        }
    </script>
    <style>
        /* Custom Scrollbar */
        .custom-scroll::-webkit-scrollbar {
            width: 12px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #D6E4F0;
            border-left: 2px solid black;
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background-color: #94A3B8;
            border: 2px solid black;
            border-radius: 6px;
        }
    </style>
</head>
<body class="bg-ui-bg min-h-screen font-sans p-4 sm:p-8">

    <!-- HEADER -->
    <header class="max-w-6xl mx-auto flex justify-between items-start mb-10">
        <!-- Logo Placeholder -->
        <div class="w-24 h-24 bg-white rounded-full border-[3px] border-black flex items-center justify-center shadow-lg overflow-hidden z-10">
            <svg viewBox="0 0 24 24" class="w-16 h-16 text-gray-800" fill="currentColor">
                <path d="M12 2L2 22h20L12 2zm0 4l6 14H6l6-14z"/>
            </svg>
        </div>

        <!-- Navigation Buttons -->
        <div class="flex space-x-4 mt-2">
            <button onclick="window.location.href='/about'" class="px-8 py-2 bg-btn-bg border-[3px] border-black rounded-lg text-lg font-bold hover:bg-white transition-colors shadow-md">
                About
            </button>
            <button onclick="window.location.href='/user_home'" class="px-8 py-2 bg-btn-bg border-[3px] border-black rounded-lg text-lg font-bold hover:bg-white transition-colors shadow-md">
                Home
            </button>
        </div>
    </header>

    <!-- MAIN CONTENT GRID -->
    <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-10">

        <!-- LEFT COLUMN: Profile & Request Form -->
        <div class="lg:col-span-5 flex flex-col gap-8">
            
            <!-- Profile Box -->
            <div>
                <div class="border-[3px] border-black bg-white/40 p-6 text-lg font-medium leading-loose shadow-lg relative">
                    <p><span class="font-bold">Name:</span> <span id="pName" class="ml-2">Bloggins</span></p>
                    <p><span class="font-bold">Rank:</span> <span id="pRank" class="ml-2">LGen</span></p>
                    <p><span class="font-bold">Email:</span> <a href="#" class="text-blue-800 underline ml-2">gen.bloggins@gmail.com</a></p>
                    <p><span class="font-bold">Fav Food:</span> <span id="pFood" class="ml-2">Chicken Bianco</span></p>
                    <p><span class="font-bold">Affiliation:</span> <span id="pAffil" class="ml-2">Researcher</span></p>
                </div>
                
                <!-- Edit Button (Underneath) -->
                <div class="mt-2 text-right">
                    <button id="editBtn" class="text-blue-900 font-bold text-sm hover:underline cursor-pointer">
                        [ Edit Profile ]
                    </button>
                </div>
            </div>

            <!-- Request Form -->
            <div class="mt-4">
                <button id="requestBtn" class="w-48 py-3 bg-btn-bg border-[3px] border-black rounded-lg text-lg font-bold hover:bg-white transition-all shadow-[4px_4px_0px_0px_rgba(0,0,0,1)] active:translate-y-1 active:shadow-none mb-6">
                    Make request
                </button>

                <div class="flex flex-col sm:flex-row items-center text-lg font-medium text-black">
                    <span class="mb-2 sm:mb-0 sm:mr-2">Requesting data from</span>
                    
                    <!-- Date Input 1 -->
                    <input type="text" id="startDate" placeholder="DD/MM/YY" 
                           class="w-32 p-1 border-2 border-gray-600 bg-white/60 text-center focus:border-black focus:outline-none mx-2 placeholder-gray-500">
                    
                    <span class="my-2 sm:my-0">to</span>
                    
                    <!-- Date Input 2 -->
                    <input type="text" id="endDate" placeholder="DD/MM/YY" 
                           class="w-32 p-1 border-2 border-gray-600 bg-white/60 text-center focus:border-black focus:outline-none mx-2 placeholder-gray-500">
                </div>
            </div>
        </div>

        <!-- RIGHT COLUMN: Requested Datasets List -->
        <div class="lg:col-span-7">
            <div class="border-[3px] border-black rounded-xl bg-box-bg overflow-hidden shadow-2xl h-[600px] flex flex-col">
                <!-- Header Row -->
                <div class="flex border-b-[3px] border-black bg-gray-200 font-bold p-3 text-sm">
                    <span class="w-1/2">Requested Dataset Name</span>
                    <span class="w-1/4">Date</span>
                    <span class="w-1/4">Time</span>
                </div>
                
                <!-- Scrollable Content -->
                <div id="datasetList" class="overflow-y-auto custom-scroll flex-grow">
                    <!-- Content populated by JS below -->
                </div>
            </div>
        </div>

    </main>

    <script>
        // --- MOCK DATA ---
        const datasets = [
            { name: "Arctic Shelf Survey #4", date: "2024-10-10", time: "09:00" },
            { name: "Sonobuoy Delta - Raw Audio", date: "2024-10-11", time: "14:30" },
            { name: "Thermal Imagery Batch A", date: "2024-10-12", time: "23:15" },
            { name: "UHF Signal Logs", date: "2024-10-13", time: "04:45" },
            { name: "Atmospheric Pressure Set", date: "2024-10-14", time: "11:20" },
            { name: "Navigation Telemetry", date: "2024-10-15", time: "16:00" },
            { name: "Solar Array Diagnostics", date: "2024-10-16", time: "08:10" },
            { name: "Ice Thickness Radar", date: "2024-10-17", time: "13:40" },
            { name: "Hydrophone Array 2 - Left", date: "2024-10-18", time: "19:50" },
            { name: "Deep Sea Salinity", date: "2024-10-19", time: "10:05" },
            { name: "Wind Speed Vectors", date: "2024-10-20", time: "15:25" },
            { name: "Satellite Uplink Health", date: "2024-10-21", time: "06:30" },
            { name: "Marine Biology Sample C", date: "2024-10-22", time: "12:00" }
        ];

        // --- POPULATE LIST ---
        const listContainer = document.getElementById('datasetList');
        datasets.forEach(item => {
            const row = document.createElement('div');
            row.className = "flex p-3 border-b border-black hover:bg-white transition-colors cursor-pointer text-sm sm:text-base";
            row.innerHTML = `
                <span class="w-1/2 font-medium truncate pr-2">${item.name}</span>
                <span class="w-1/4 text-gray-700">${item.date}</span>
                <span class="w-1/4 text-gray-700 font-mono">${item.time}</span>
            `;
            listContainer.appendChild(row);
        });

        // --- EDIT PROFILE LOGIC ---
        const editBtn = document.getElementById('editBtn');
        const fields = ['pName', 'pRank', 'pFood', 'pAffil'];
        let isEditing = false;

        editBtn.addEventListener('click', () => {
            isEditing = !isEditing;
            
            fields.forEach(id => {
                const el = document.getElementById(id);
                el.contentEditable = isEditing;
                if (isEditing) {
                    el.classList.add('bg-white', 'px-1', 'border', 'border-blue-400', 'rounded');
                } else {
                    el.classList.remove('bg-white', 'px-1', 'border', 'border-blue-400', 'rounded');
                }
            });

            if (isEditing) {
                editBtn.textContent = "[ Save Changes ]";
                editBtn.classList.remove('text-blue-900');
                editBtn.classList.add('text-green-700');
            } else {
                editBtn.textContent = "[ Edit Profile ]";
                editBtn.classList.remove('text-green-700');
                editBtn.classList.add('text-blue-900');
                console.log("Profile Saved");
            }
        });

        // --- MAKE REQUEST LOGIC ---
        const requestBtn = document.getElementById('requestBtn');
        requestBtn.addEventListener('click', () => {
            const start = document.getElementById('startDate').value;
            const end = document.getElementById('endDate').value;
            
            if(start && end) {
                alert(`Request Sent!\nFetching data sets between ${start} and ${end}...`);
                // Logic to send to server would go here
            } else {
                alert("Please enter both a start date and an end date.");
            }
        });
    </script>
</body>
</html>